<div class="geo-run">

  <Tab :items="tabItems">

    <template slot="panel-icon">
      <div class="text-danger" v-if="geo.emulator">
        <i class="oi oi-audio"></i>
        <span>эмулятор</span>
      </div>

      <Signal :value="geoSignalValue" :off="geoIsDisabled"/>
    </template>

    <template slot="content-activity">
      <div class="geo-run_body">
        <Timer :disabled="disabled" :pause="status === 2" :time="time"/>

        <Activity :tempo="tempo" :path="path" :speed="speed" :target="targetDistance" class="mt-3"/>

        <div class="row mx-3" v-if="this.geoErrorMessage">
          <div class="col-12 text-center text-danger">{{ this.geoErrorMessage }}</div>
        </div>

        <div class="geo-run_controls my-3" v-if="status === 0">
          <Button :key="1" :disabled="disabled" skin="orange" mx="2" text="старт" icon="media-play" @click="beforeStarRun" />
        </div>

        <div class="geo-run_controls my-3" v-if="!disabled && status === 1">
          <Button :key="2" :disabled="disabled" skin="orange" mx="2" text="пауза" icon="media-pause" @click="stopRun" />
        </div>

        <div class="geo-run_controls my-3" v-if="!disabled && status === 2">
          <Button :key="3" :disabled="disabled" skin="red" mx="2" text="финиш" icon="media-stop" @click="endRun" />
          <Button :key="4" :disabled="disabled" skin="green" mx="2" text="продолжить" icon="media-step-forward" @click="nextRun" />
        </div>

      </div>

      <Confirm
        btnYes="Включить"
        text="Включите GPS и повторите."
        :show="showConfirmGPS"
        @clickNo="cancelEnableGPS"
        @clickYes="enableGPS"
      />

    </template>

    <template slot="content-details">
      <Details/>
    </template>

    <template slot="content-tempo">
      <Tempo :day="day" :key="dayId" v-if="day"/>
    </template>
  </Tab>

  <Countdown :show="showCountdown" @countdownStop="startRun"/>
  <CalendarRun :targetId="targetId" @activeDay="activeDay" @selectDay="selectDay" :disabled="calendarDisabled" />

</div>