
<Layout :showCorner="true" :showFoot="!selectedActivity">
  <template slot="body">

    <WrapCorner v-if="selectedActivity">
      <Tooltip class="mx-1" :content="imgTooltip" :show="isVisibleImgTooltip" trigger="manual" placement="bottom">
        <Button size="30px" icon="image" shape="square" @click="makeScreen" :disabled="btnMakeScreenDisabled"/>
      </Tooltip>
      <Tooltip content="Удалить активность" placement="bottom">
        <Button size="30px" icon="trash" skin="gray" shape="square" @click="showConfirmRemoveActivity"/>
      </Tooltip>
    </WrapCorner>

    <Confirm
      icon="trash"
      btnNo="Нет"
      btnYes="Да"
      text="Вы уверены что хотите удалить активность?"
      :show="confirmRemoveEnable"
      @clickNo="cancelRemoveActivity"
      @clickYes="confirmRemoveActivity" />

    <Spinner :loading="loading"/>

    <div v-if="selectedActivity">
      <div id="tempo-statistics" class="tempo_background">
        <Row class="my-4">
          <Cell align="center" :bold="true" size="xlg" class="tempo_distance">
            <template slot="content">
              <span>{{ activityPathLength(selectedActivity) }}</span>
              <span class="tempo_distance__label">км</span>
            </template>
            <template slot="after-content">
              <span class="tempo_distance__label">{{ activityName(selectedActivity) }}</span>
            </template>
          </Cell>
        </Row>

        <Row class="my-4">
          <Cell afterContent="Средний темп" :content="avgTempoString(selectedActivity)" align="center" :bold="true" size="lg" />
          <Cell afterContent="Самый быстрый" :content="upperTempoString(selectedActivity)" align="center" :bold="true" size="lg" />
          <Cell afterContent="Самый медленный" :content="lowerTempoString(selectedActivity)" align="center" :bold="true" size="lg" />
        </Row>

        <div class="mt-4">
          <Rate :value="distanceTempoTime(distance)" :key="key" v-for="(distance, key) of distances(selectedActivity)" :min="0" :max="maxTempo(selectedActivity)" class="my-3">
            <template slot="before">{{ distanceNumber(selectedActivity, distance) }}</template>
            <template slot="center">{{ distanceToTempoString(distance) }}</template>
            <template slot="after">{{ distanceTime(selectedActivity, distance) }}</template>
          </Rate>
        </div>
      </div>

      <Row class="mt-2 mb-4">
        <Cell :align="true">
          <template slot="content">
            <Button skin="orange" text="Список астивностей" @click="closeActivity" />
          </template>
        </Cell>
      </Row>
    </div>

    <div class="tempo_container tempo_container__column" v-if="!selectedActivity && activities.length > 0">
      <SquareArea alignHorizontal="center">
        <SquareItem @click="openActivity(activity)" :key="key" v-for="(activity, key) of activities">
          <template slot="image">
            <Rating :label="activityPathLength(activity)" />
          </template>
          <template slot="title">{{ activityName(activity) }}</template>
          <template slot="description">Средний темп {{ avgTempoString(activity) }}</template>
        </SquareItem>
      </SquareArea>
    </div>

    <div class="tempo_container tempo_container__column tempo_container__center" v-if="activities.length === 0 && !loading">
      <Row>
        <Cell content="Нет активностей" :beforeContent="activityEmpty" :align="true" />
      </Row>
    </div>
  </template>

  <template slot="foot">
    <CalendarRun v-if="calendarActivity" @activeDay="activeDay" @selectDay="selectDay" :calendarActivity="calendarActivity" />
  </template>
</Layout>
